<main class="layout-container">
  <app-btn-navigate-prev />

  <div class="publication-container pd-3">
    <div class="mt-5 service-provider">
      <h2 class="text-xl">{{ data().title }}</h2>
    </div>

    <div class="mt-rating">
      <span class="mr-2">{{ averageRating }}</span>
      <p-rating cancel="false" [readonly]="true" [(ngModel)]="ratingValue" />
    </div>

    <div class="mt-1 price-and-profile">
      <span class="price">Precio a convenir</span>
      <div class="contenedor-boton">
        <p-button
          styleClass="text-color underline"
          link="true"
          (click)="onProfileNavigate(data().idUser)"
          label="Ver Perfil" />
      </div>
    </div>

    <div class="mt-3">
      <p-carousel [value]="carouselImage" [numVisible]="1" [numScroll]="3" [circular]="false">
        <ng-template let-images pTemplate="item">
          <img [src]="images.src" [alt]="images.alt" />
        </ng-template>
      </p-carousel>
    </div>

    <div class="service-description">
      <h2 class="text-xl m-0">Descripción</h2>
      <p class="m-0 mt-2 font-italic">{{ data().text }}</p>
    </div>

    <h2 class="text-xl mt-5">Métodos de pago</h2>
    <div class="card flex justify-content-left">
      <div class="flex flex-column gap-2">
        <div *ngFor="let category of categories" class="field-checkbox">
          <p-checkbox
            name="group"
            [readonly]="true"
            [label]="category.name"
            [value]="category"
            [(ngModel)]="selectedCategories" />
        </div>
      </div>
    </div>

    <div>
      <h2 class="text-xl mt-5">Ubicación</h2>
      <div class="flex align-items-center gap-2">
        <p class="m-0">
          <i class="pi pi-map-marker text-lg"></i>
          {{ data().area }}
        </p>
      </div>
      @if (data().latitude && data().latitude) {
        <div class="mt-3">
          <app-google-map [lon]="data().longitude" [lat]="data().latitude" />
        </div>
      }
    </div>

    <div class="flex flex-column align-items-center mt-5 gap-4">
      <button
        class="reset-btn font-bold cursor-pointer underline"
        (click)="onChatNavigate(data().idUser)">
        Envíame una consulta
      </button>
      <p-button
        class="mb-4"
        styleClass="w-15rem"
        label="Contratar"
        severity="contrast"
        (onClick)="onChatNavigate(data().idUser)" />
    </div>
  </div>
</main>
